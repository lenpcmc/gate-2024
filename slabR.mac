#Things to measure: scintillator height/radius/material, radioactive Source material, type of radiation (in radSource)

##################
#    Preamble    #
#                #
##################
/control/execute verbose.mac

###################
#   Configuring   #
#                 #
###################

# Create world
/gate/geometry/setMaterialDatabase GateMaterials.db 
/gate/world/geometry/setXLength 0.2 m
/gate/world/geometry/setYLength 0.2 m
/gate/world/geometry/setZLength 0.2 m
/gate/world/setMaterial Air

# Create Scintillating Slab
/gate/world/daughters/name scintillator
/gate/world/daughters/insert cylinder
/gate/scintillator/setMaterial LYSO #Scintillating material
/gate/scintillator/geometry/setRmin 0 mm
/gate/scintillator/geometry/setRmax 20 mm # Measure this every time please!
/gate/scintillator/geometry/setHeight 4 mm # Measure this every time please!
/gate/scintillator/geometry/setPhiStart 0 deg
/gate/scintillator/geometry/setDeltaPhi 360 deg
/gate/scintillator/vis/setColor yellow

# Create strontium (or other) source
/gate/world/daughters/name radioactiveSource
/gate/world/daughters/insert cylinder
/gate/radioactiveSource/setMaterial Air #Can't have strontium cus it blows up :(
/gate/radioactiveSource/geometry/setRmin 0 mm
/gate/radioactiveSource/geometry/setRmax 1 mm
/gate/radioactiveSource/geometry/setHeight 1 mm
/gate/radioactiveSource/geometry/setPhiStart 0 deg
/gate/radioactiveSource/geometry/setDeltaPhi 360 deg
/gate/radioactiveSource/vis/setColor green
/gate/radioactiveSource/placement/setTranslation 0 0 4 cm
/gate/radioactiveSource/repeaters/insert linear
/gate/radioactiveSource/linear/setRepeatNumber 4
/gate/radioactiveSource/linear/setRepeatVector 0. 0. 1. mm
/gate/radioactiveSource/linear/autoCenter true

###############
# Information #
#             #
###############

/gate/physics/addPhysicsList emstandard #Use higher _opt(number) suffix for more precision

##################
#  Moving Parts  #
#                #
##################


#############
# Save File #
#           #
#############

# Energy Deposition readout
/gate/actor/addActor DoseActor edepReadout
/gate/actor/edepReadout/save slabROut.txt #Comment this one out if you don't want to record
/gate/actor/edepReadout/stepHitType random
/gate/actor/edepReadout/attachTo scintillator
/gate/actor/edepReadout/setSize 1000 1000 4 mm
/gate/actor/edepReadout/setResolution 1 1 10
/gate/actor/edepReadout/enableDose false
/gate/actor/edepReadout/enableEdep true

/gate/run/initialize

/control/execute visu.mac


#Radiation source
/gate/source/addSource radSource gps
/gate/source/radSource/gps/particle e- # Measure
/gate/source/radSource/gps/energytype UserSpectrum # Spectrum file taken from a paper for strontium 90
/gate/source/radSource/gps/setSpectrumFile ../data/strontiumSpectrum.txt
/gate/source/radSource/gps/angtype iso
/gate/source/radSource/gps/mintheta 90. deg
/gate/source/radSource/gps/maxtheta 90. deg
/gate/source/radSource/gps/minphi 90. deg
/gate/source/radSource/gps/maxphi 90. deg
/gate/source/radSource/gps/direction  0 1 0

/gate/source/radSource/gps/type Volume
/gate/source/radSource/gps/shape Cylinder
/gate/source/radSource/gps/radius 10 mm
/gate/source/radSource/gps/halfz 100 mm
# /gate/source/radSource/attachTo radioactiveSource
#/gate/source/radSource/gps/confine radSource_phys
/gate/source/radSource/gps/centre 0. 0. 0.2 m

/gate/source/radSource/visualize 3000 green 5

/gate/application/setTotalNumberOfPrimaries 1
/gate/application/start #Start er up!
